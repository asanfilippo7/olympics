<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Olympic Host City Elections</title>
    
    <style>
        
        body {
            font-family: 'Droid Sans', sans-serif;
        }

        text {
            font-family: 'Droid Sans', sans-serif;
            font-weight: 700;
        }

        text.cityName {
            cursor: pointer;
            font-size: 20px;
        }

        text.label {
            font-size: 20px;
        }

        circle, rect {
            cursor: pointer;;
        }

        img.rings {
            position: absolute;
            margin-left: 100px;
            opacity: 0.7;
        }

        .yearSelect {
            position: absolute;
            z-index: 100;
            margin-top: -30px;
            margin-left: 1975px;
            font-size: 22px;
        }

        .yearSelect select {
            font-size: 22px;
        }

        h2.title {
            font-size: 35px;
            font-weight: 700;
            margin-left: 300px;
            margin-bottom: 25px;
            opacity: 0.8;
        }

        h3.subtitle {
            font-size: 25px;
            font-weight: 400px;
            margin-left: 290px;
            margin-top: -15px;
            opacity: 0.8;
        }

        #explanation {
            position: absolute;
            margin-left: 1275px;
            margin-top: -425px;
            padding-right: 165px;
        }

        #explanation h3 {
            font-size: 20px;
            font-weight: 700;
        }

        #explanation p {
            font-size: 20px;
            font-weight: 400;
        }

        .filter.criterion {
            position: absolute;
            z-index: 100;
            margin-top: -425px;
            margin-left: 750px;
            font-size: 20px;
        }

        .filter.criterion ul {
            list-style: none;
        }

        button {
            box-shadow: none;
            border: none;
            border-radius: 0px;
            cursor: pointer;
            font-size: 18px;
            opacity: 0.8;
        }
        
    </style>
        
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>

    <script type="text/javascript">

        var data; 
        var year = 2012;

        var filtering = false;
        var filter = [];

        function setYear(v) {
            year = v;
            getData(year);
        } 
        
        function getData(year) {
            d3.selectAll("svg > *").remove();   // clear the SVG
            d3.csv("olympics_"+year+".csv", function(d) {
                data = d;
                draw();
            });
        }
        
        var baseline, meridian, hScale, vScale, rScale;     // declare some global variables
        
        function draw() {
            var target = d3.select("#hosts");
            var targetWidth = +target.attr("width");
            
            var xAxis = 1050;
            var yAxis = 50;

            var axisData = [{"x": yAxis, "y": 50},{"x": yAxis, "y": xAxis}, {"x": yAxis + 1000, "y": xAxis}];

            /* Define a function that will draw lines between the coordinates passed to it */       
            var lineFunction = d3.svg.line()
                         .x(function(d) { return d.x; })
                         .y(function(d) { return d.y; })
                         .interpolate("linear");

            // Draw the axes
            var axes = target.append("path")
                            .attr("class","axes")
                            .attr("d", lineFunction(axisData))
                            .attr("fill", "none")
                            .attr("stroke","grey")
                            .style("opacity",0.2);

            // Draw a line that continues out the x-axis to maintain continuity
            var moreX = target.append("line")
                            .attr("class","continued")
                            .attr("x1",1000)
                            .attr("x2",2250)
                            .attr("y1",xAxis)
                            .attr("y2",xAxis)
                            .attr("stroke","grey")
                            .style("opacity",0.2);

            // Label the axes
            var yAxisLabel = target.append("text")
                .attr("class","label","yAxis")
                .attr("x",yAxis)
                .attr("y", 50)
                .text("Overall Score")
                .attr("transform","translate(50,0) rotate(90)")
                .style("color","grey")
                .style("opacity",0.6);

            var xAxisLabel = target.append("text")
                .attr("class","label","xAxis")
                .attr("x",yAxis + 750)
                .attr("y", xAxis + 50)
                .text("Individual Criterion Score")
                .style("opacity",0.6);

            // Scale the x-axis
            for(var i = 1; i < 11; i++) {
                var iStr = i.toString();
                target.append("text")
                    .attr("class","xScale " + iStr)
                    .attr("x",yAxis + (100 * i))
                    .attr("y",xAxis + 15)
                    .text(iStr)
                    .style("color","grey")
                    .style("opacity",0.4);
            }

            // Scale the y-axis
            for(var i = 1; i < 11; i++) {
                var iStr = i.toString();
                target.append("text")
                    .attr("class","xScale " + iStr)
                    .attr("x",yAxis - 15)
                    .attr("y",xAxis - (100*i))
                    .text(iStr)
                    .style("color","#003300")
                    .style("opacity",0.4);
            }

            // Draw the 6 point line to indicate the baseline level
            target.append("line")
                .attr("class","benchmark")
                .attr("x1",yAxis + 600)
                .attr("x2",yAxis + 600)
                .attr("y1",xAxis)
                .attr("y2",xAxis - 1000)
                .attr("stroke","grey")
                .attr("stroke-weight",2)
                .style("opacity",0.6);       

            // Draw the horizontal lines that delineate each host city's position
            target.selectAll("line.oPos").data(data).enter().append("line")
                .attr("class", function(d) {
                    return "oPos " + d["City"];
                })
                .attr("x1",yAxis)
                .attr("x2",yAxis + 1000)
                .attr("y1",function(d) {
                    return (xAxis - (+d["Overall Score"] * 100));
                })
                .attr("y2",function(d) {
                    return (xAxis - (+d["Overall Score"] * 100));
                })
                .attr("stroke",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return "#006600";
                    }
                    else {
                        return "black";
                    }
                })
                .attr("stroke-weight",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return 3;
                    }
                    else {
                        return 1;
                    }
                })
                .style("opacity",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return 1.0;
                    }
                    else {
                        return 0.6;
                    }
                });

            // Add the name of each city above its respective line
            target.selectAll("text.cityName").data(data).enter().append("text")
                .attr("class", function(d) {
                    return "cityName " + d["City"];
                })
                .attr("x", function(d) {
                    return yAxis + 1025;
                })
                .attr("y", function(d) {
                    return (xAxis + 3 - (+d["Overall Score"] * 100));
                })
                .text(function(d) {
                    return d["City"];
                })
                .on("mouseover", function() {
                    var t = this;
                    highlightMine(t);
                })
                .on("mouseout", function() {
                    unHighlight();
                });
            
            // Draw all circles for the Gov't Support criterion
            target.selectAll("circle.government").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "government " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Government Support (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Government Support (weight)"] * 5);
                        })
                    .style("fill","#003752")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Government Support" + "\n City: " + d["City"] + "\n Score: " + d["Government Support (average)"] + "\n Criterion Weight: " + d["Government Support (weight)"];
                    });

            // Draw all circles for the General Infrastructure criterion
            target.selectAll("circle.infrastructure").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "infrastructure " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["General Infrastructure (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["General Infrastructure (weight)"] * 5);
                        })
                    .style("fill","#0085c7")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "General Infrastructure" + "\n City: " + d["City"] + "\n Score: " + d["General Infrastructure (average)"] + "\n Criterion Weight: " + d["General Infrastructure (weight)"];
                    });

            // Draw all circles for the Sports Infrastructure criterion
            target.selectAll("circle.sports").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "sports " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Sports Infrastructure (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Sports Infrastructure (weight)"] * 5);
                        })
                    .style("fill","#786001")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Sports Infrastructure" + "\n City: " + d["City"] + "\n Score: " + d["Sports Infrastructure (average)"] + "\n Criterion Weight: " + d["Sports Infrastructure (weight)"];
                    });

            // Draw all circles for the Olympic Village criterion
            target.selectAll("circle.village").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "village " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Olympic Village (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Olympic Village (weight)"] * 5);
                        })
                    .style("fill","#f4c300")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Olympic Village" + "\n City: " + d["City"] + "\n Score: " + d["Olympic Village (average)"] + "\n Criterion Weight: " + d["Olympic Village (weight)"];
                    });

            // Draw all circles for the Environment criterion
            target.selectAll("circle.environment").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "environment " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Environmental Conditions (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Environmental Conditions (weight)"] * 5);
                        })
                    .style("fill","#013d18")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Enviromental Conditions" + "\n City: " + d["City"] + "\n Score: " + d["Enviromental Conditions (average)"] + "\n Criterion Weight: " + d["Enviromental Conditions (weight)"];
                    });

            // Draw all circles for the Accomodations criterion
            target.selectAll("circle.accomodation").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "accomodation " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Accomodation (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Accomodation (weight)"] * 5);
                        })
                    .style("fill","#009f3d")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Accomodation" + "\n City: " + d["City"] + "\n Score: " + d["Accomodation (average)"] + "\n Criterion Weight: " + d["Accomodation (weight)"];
                    });

            // Draw all circles for the Transportation criterion
            target.selectAll("circle.transport").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "transport " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Transport (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Transport (weight)"] * 5);
                        })
                    .style("fill","#630211")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Transportation" + "\n City: " + d["City"] + "\n Score: " + d["Transport (average)"] + "\n Criterion Weight: " + d["Transport (weight)"];
                    });

            // Draw all circles for the Security criterion
            target.selectAll("circle.security").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "security " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Security (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Security (weight)"] * 5);
                        })
                    .style("fill","#df0024")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Security" + "\n City: " + d["City"] + "\n Score: " + d["Security (average)"] + "\n Criterion Weight: " + d["Security (weight)"];
                    });

            // Draw all circles for the Experience criterion
            target.selectAll("circle.experience").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "experience " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Experience from Past Sporting Events (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Experience from Past Sporting Events (weight)"] * 5);
                        })
                    .style("fill","#000000")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Experience from Past Sporting Events" + "\n City: " + d["City"] + "\n Score: " + d["Experience from Past Sporting Events (average)"] + "\n Criterion Weight: " + d["Experience from Past Sporting Events (weight)"];
                    });

            // Draw all circles for the Finance criterion
            target.selectAll("circle.finance").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "finance " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["Finance (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["Finance (weight)"] * 5);
                        })
                    .style("fill","#737373")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "Finance" + "\n City: " + d["City"] + "\n Score: " + d["Finance (average)"] + "\n Criterion Weight: " + d["Finance (weight)"];
                    });

            // Draw all circles for the General Concept criterion
            target.selectAll("circle.concept").data(data).enter().append("circle")
                    .attr("class", function(d) {
                        return "concept " + d["City"];
                        })
                    .attr("cx",function(d) {
                        return (yAxis + (+d["General Concept (average)"] * 100));
                        })
                    .attr("cy",function(d) {
                        return (xAxis - (+d["Overall Score"] * 100));
                        })
                    .attr("r",function(d) {
                        return (+d["General Concept (weight)"] * 5);
                        })
                    .style("fill","#bdc1c3")
                    .style("stroke","white")
                    .style("opacity",0.6)
                    .append("title").text(function(d) {
                        return "General Concept" + "\n City: " + d["City"] + "\n Score: " + d["General Concept (average)"] + "\n Criterion Weight: " + d["General Concept (weight)"];
                    });

            // Perform the mouseover country-isolation function when you mouseover any bubble
            d3.selectAll("circle").on("mouseover", function() {
                var t = this;
                if(filtering) {
                    var classname = d3.select(t).attr("class").split(" ")[0];
                    if(filter.includes(classname)) {
                        highlightMine(t); // If filtering, only highlight if you're mousing over one of the selected criteria 
                    }
                }
                else {
                    highlightMine(t);
                }
            })
            .on("mouseout",function() {
                var t = this;
                if(filtering) {
                    var classname = d3.select(t).attr("class").split(" ")[0];
                    if(filter.includes(classname)) {
                        unHighlight(); // If highlighting, only perform the unhighlight function if you're mousing out of one of the selected criteria
                    }
                }
                else {
                    unHighlight();
                }
            });

            // Draw some more lines to show which voting bars belong to which countries
            target.selectAll("line.vote").data(data).enter().append("line")
                .attr("class", function(d) {
                    return "vote " + d["City"];
                })
                .attr("x1",1200)
                .attr("x2",2250)
                .attr("y1",function(d) {
                    return (xAxis - (+d["Overall Score"] * 100));
                })
                .attr("y2",function(d) {
                    return (xAxis - (+d["Overall Score"] * 100));
                })
                .attr("stroke",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return "#006600";
                    }
                    else {
                        return "black";
                    }
                })
                .attr("stroke-weight",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return 3;
                    }
                    else {
                        return 1;
                    }
                })
                .style("opacity",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return 1.0;
                    }
                    else {
                        return 0.6;
                    }
                });

            // Label the vote section
            target.append("text")
                .attr("class","vote label")
                .attr("x",1200)
                .attr("y",120)
                .text("Voting Outcome:")

            // Label the voting rounds
            target.append("text")
                .attr("class","vote r1")
                .attr("x",1200)
                .attr("y",150)
                .text("Round One");

            target.append("text")
                .attr("class","vote r2")
                .attr("x",1450)
                .attr("y",150)
                .text("Round Two");

            target.append("text")
                .attr("class","vote r3")
                .attr("x",1700)
                .attr("y",150)
                .text("Round Three");

            target.append("text")
                .attr("class","vote r4")
                .attr("x",1950)
                .attr("y",150)
                .text("Round Four");

            // Draw the votes for the first voting round
            target.selectAll("rect.vote.r1").data(data).enter().append("rect")
                .attr("class", function(d) {
                    return "vote r1 " + d["City"];  
                    })
                .attr("x",1200)
                .attr("y",function(d) {
                    return (xAxis - 5 - (+d["Overall Score"] * 100));
                })
                .attr("width", function(d) {
                    return (+d["Voting Round 1 Results"] * 5);
                })
                .attr("height",10)
                .attr("fill",function(d) {
                    if(d["Eventual Winner"] === "Yes" && +d["Voting Round 2 Results"] === 0) {
                        return "#006600";
                    }
                    else {
                        return "grey";
                    }
                })
                .style("opacity",0.6)
                .append("title").text(function(d) {
                        return "Voting Round 1" + "\n City: " + d["City"] + "\n Votes: " + d["Voting Round 1 Results"];
                    });

            // Draw the votes for the second voting round
            target.selectAll("rect.vote.r2").data(data).enter().append("rect")
                .attr("class", function(d) {
                    return "vote r2 " + d["City"];  
                    })
                .attr("x",1450)
                .attr("y",function(d) {
                    return (xAxis - 5 - (+d["Overall Score"] * 100));
                })
                .attr("width", function(d) {
                    return (+d["Voting Round 2 Results"] * 5);
                })
                .attr("height",10)
                .attr("fill",function(d) {
                    if(d["Eventual Winner"] === "Yes" && +d["Voting Round 3 Results"] === 0) {
                        return "#006600";
                    }
                    else {
                        return "grey";
                    }
                })
                .style("opacity",0.6)
                .append("title").text(function(d) {
                        return "Voting Round 2" + "\n City: " + d["City"] + "\n Votes: " + d["Voting Round 2 Results"];
                    });

            // Draw the votes for the third voting round
            target.selectAll("rect.vote.r3").data(data).enter().append("rect")
                .attr("class", function(d) {
                    return "vote r3 " + d["City"];  
                    })
                .attr("x",1700)
                .attr("y",function(d) {
                    return (xAxis - 5 - (+d["Overall Score"] * 100));
                })
                .attr("width", function(d) {
                    return (+d["Voting Round 3 Results"] * 5);
                })
                .attr("height",10)
                .attr("fill",function(d) {
                    if(d["Eventual Winner"] === "Yes" && +d["Voting Round 4 Results"] === 0) {
                        return "#006600";
                    }
                    else {
                        return "grey";
                    }
                })
                .style("opacity",0.6)
                .append("title").text(function(d) {
                        return "Voting Round 3" + "\n City: " + d["City"] + "\n Votes: " + d["Voting Round 3 Results"];
                    });

            // Draw the votes for the fourth voting round
            target.selectAll("rect.vote.r4").data(data).enter().append("rect")
                .attr("class", function(d) {
                    return "vote r4 " + d["City"];  
                    })
                .attr("x",1950)
                .attr("y",function(d) {
                    return (xAxis - 5 - (+d["Overall Score"] * 100));
                })
                .attr("width", function(d) {
                    return (+d["Voting Round 4 Results"] * 5);
                })
                .attr("height",10)
                .attr("fill",function(d) {
                    if(d["Eventual Winner"] === "Yes") {
                        return "#006600";
                    }
                    else {
                        return "grey";
                    }
                })
                .style("opacity",0.6)
                .append("title").text(function(d) {
                        return "Voting Round 4" + "\n City: " + d["City"] + "\n Votes: " + d["Voting Round 4 Results"];
                    });

            // Perform the mouseover country-isolation function when you mouseover any vote block
            d3.selectAll("rect.vote").on("mouseover", function() {
                var t = this;
                highlightMine(t);
            })
            .on("mouseout",function() {
                unHighlight();
            });
        
        }

        // When the user selects or removes a filter term, add or remove it from the list of current filters
        function pushFilter(element,term) {
            var e = d3.select(element)[0][0];
            if(e.className) {
                d3.select(element).attr("class","").text("Filter");
                var ind = filter.indexOf(term);
                filter.splice(ind,1);
            }
            else {
                d3.select(element).attr("class","clicked").text("Remove filter");;
                filter.push(term);
            }
            filterCriteria();
        }

        // Filter the bubbles by the currently selected criteria. If none are selected, re-draw the full graph.
        function filterCriteria() {
            if(filter.length > 0) {
               filtering = true;
               d3.selectAll("circle").style("opacity",0.1);
                for(var i = 0; i < filter.length; i++) {
                    var c = 'circle.' + filter[i];
                    d3.selectAll(c).transition(750).style("opacity",1.0);
                } 
            }
            else {
                filtering = false;
                getData(2012);
            }
        }

        // Highlight the bubbles and votes of the selected country on mouseover: mouseover the name, bubbles, or votes
        function highlightMine(t) {
            if(d3.select(t).attr("class").includes("vote")) {
                var classname = d3.select(t).attr("class").split(" ")[2];
            }
            else {
                var classname = d3.select(t).attr("class").split(" ")[1];
            }
            d3.selectAll("circle").style("opacity",0.1);
            if (filtering) {
                for(var i = 0; i < filter.length; i++) {
                    var selectI = "circle." + classname + "." + filter[i];
                    d3.selectAll(selectI).style("opacity",1.0);
                }
            }
            else {
                var selectCircles = "circle." + classname;
                d3.selectAll(selectCircles).style("opacity",1.0);
            }
            d3.selectAll("rect.vote").style("opacity",0.1);
            selectVote = "rect.vote." + classname;
            d3.selectAll(selectVote).style("opacity",1.0);
        }

        // Unhighlight selected bubbles/votes, etc. for a country on mouseout
        function unHighlight() {
            if(filtering) {
                filterCriteria();
            }
            else {
                d3.selectAll("circle").style("opacity",0.6);
            }
            d3.selectAll("rect.vote").style("opacity",0.6);
        }
        
    </script>
    
</head>
<body onload="getData(2012)">

    <img class="rings" src="http://vignette3.wikia.nocookie.net/olympic/images/5/58/Olympic_Rings.png/revision/latest/scale-to-width-down/640?cb=20100215073248" width="200px" height="97" />
    <h2 class="title">The Makings of a Champion:</h2>
    <h3 class="subtitle">A visual guide to Olympic host city elections</h3>

    <div class="yearSelect"><h3>Select an Olympic Year: 
        <select onChange="setYear(this.value)">
            <option value="2012">2012</option>
            <option value="2014">2014</option>
            <option value="2016">2016</option>
        </select>
    </div>

    <svg id="hosts" width="2250" height="1100" style="margin-left:75px;"></svg>
    
    <div id="controls">
            <div class="filter criterion">
                <!-- Add the rest of the filters and make this the key, not just buttons -->
                <p>Select criteria by which to filter:</p>
                <ul>
                    <li><button onClick="pushFilter(this,'government')" style="background-color:#003752; color:white; opacity:0.6;">Filter</button> Government Support</li>
                    <li><button onClick="pushFilter(this,'infrastructure')" style="background-color:#0085c7; color:white; opacity:0.6;">Filter</button> General Infrastructure</li>
                    <li><button onClick="pushFilter(this,'sports')" style="background-color:#786001; color:white; opacity:0.6;">Filter</button> Sports Infrastructure</li>
                    <li><button onClick="pushFilter(this,'village')" style="background-color:#f4c300; color:white; opacity:0.6;">Filter</button> Olympic Village</li>
                    <li><button onClick="pushFilter(this,'environment')" style="background-color:#013d18; color:white; opacity:0.6;">Filter</button> Environmental Conditions and Impact</li>
                    <li><button onClick="pushFilter(this,'accomodation')" style="background-color:#009f3d; color:white; opacity:0.6;">Filter</button> Accomodation</li>
                    <li><button onClick="pushFilter(this,'transport')" style="background-color:#630211; color:white; opacity:0.6;">Filter</button> Transportation</li>
                    <li><button onClick="pushFilter(this,'security')" style="background-color:#df0024; color:white; opacity:0.6;">Filter</button> Security </li>
                    <li><button onClick="pushFilter(this,'experience')" style="background-color:#000000; color:white; opacity:0.6;">Filter</button> Experience from Past Sporting Events</li>
                    <li><button onClick="pushFilter(this,'finance')" style="background-color:#737373; color:white; opacity:0.6;">Filter</button> Finanace</li>
                    <li><button onClick="pushFilter(this,'concept')" style="background-color:#bdc1c3; color:white; opacity:0.6;">Filter</button> General Concept</li>
                </ul> 
            </div>
    </div>

    <div id="explanation">
        <h3>How to Read This Graphic:</h3>
        
        <p>Before every Olympic cycle, the International Olympic Committee undertakes a years-long process of evaluating and electing a host city from its list of candidates. Before the voting process begins, the IOC Evaluation Commission—composed of members of the IOC and technical advisors—reviews each candidate city and compiles a report, ranking each country based on a list of <strong>11 weighted metrics</strong> listed in the legend at left. Each country receives a <strong>score from 1 to 10 for each metric</strong>, as seen on the x-axis at left. A score of 6 is considered <strong>the minimum acceptable score</strong>. Each metric is also given a <strong>weight from 2 to 5</strong> representing on its relative importance for a host city. <strong>The weighted average of the criterion scores for each country becomes that country’s overall score from 1 to 10</strong>, represented on the y-axis.</p>

        <p>While the IOC Evaluation Commission reports these scores to voting members of the IOC, each voter retains the right to vote for whichever host city they would like. <strong>Voting happens in multiple rounds</strong> as represented above. <strong>Each round, the candidate city receiving the fewest votes is eliminated</strong> until a sole country is left. The <strong>eventual winner</strong> is highlighted in green throughout the graphic.</p>

    </div>

</body>
</html>
